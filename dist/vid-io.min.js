/*! vid-io - v0.0.1
 *  Release on: 2015-12-19
 *  Copyright (c) 2015 artworx GmbH
 *  Licensed MIT */
!function(a,b){"function"==typeof define&&define.amd?define([],function(){return a.VidIo=b()}):"object"==typeof exports?module.exports=b():a.VidIo=b()}(this,function(){"use strict";var a=function(){return{noop:function(){},tryParseUrlParameter:function(a,b){b=b.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var c="[\\?&]"+b+"=([^&#]*)",d=new RegExp(c),e=d.exec(a);return!e||e.length<=1?"":e[1]}}}(),b=function(b,c){function d(a,b){var c="pixel_"+b+"_"+(new Date).getTime(),d=new Image;d.src=a,d.id=c,d.height=1,d.width=1,d.style.visibility="hidden",d.onload=function(){try{this.parentElement.removeChild(this)}catch(a){}},document.body.appendChild(d)}function e(a){var b=function(b,c){a.addEventListener(b,c,!0)},c=function(b,c){a.removeEventListener(b,c)};return b("error",f),b("loadstart",g),b("loadeddata",h),b("pause",i),b("playing",j),b("volumechange",o),b("seeking",k),b("seeked",l),b("timeupdate",m),b("ended",n),function(){c("error",f),c("loadstart",g),c("loadeddata",h),c("pause",i),c("playing",j),c("volumechange",o),c("seeking",k),c("seeked",l),c("timeupdate",m),c("ended",n)}}function f(a){a.target}function g(a){}function h(a){v("creativeview")}function i(a){v("pause")}function j(a){var b=a.target;b.currentTime<1?(s.loop=s.loop+1,v("start")):v("resume")}function k(a){var b=a.target;v(b.currentTime<1?"complete":"seek")}function l(a){var b=a.target;b.currentTime>0}function m(a){var b=a.target,c=100*b.currentTime/b.duration;c>=24.5&&26>=c?v("firstquartile"):c>=49.5&&51>=c?v("midpoint"):c>=74.5&&76>=c&&v("thirdquartile")}function n(a){v("complete")}function o(a){var b=a.target,c=t[b.id];c&&clearTimeout(c),b.muted||0===b.volume?t[b.id]=setTimeout(function(){v("mute")},100):t[b.id]=setTimeout(function(){v("unmute")},100)}if(!b)throw new Error("Invalid element");b.id||(b.id="_vidio_"+(new Date).getTime());var p=c||{},q=p.baseUrl,r=p.additionalUrlParams||{};this.loop=-1;var s=this,t=[],u=function(a){var b=s.loop>0?s.loop:0,c=(new Date).getTime(),d=q+"?event="+encodeURIComponent(a)+"&loop="+b+"&ts=_"+c;for(var e in r)r.hasOwnProperty(e)&&(d+="&"+e+"="+encodeURIComponent(r[e]));return d},v=function(a){var b=u(a);d(b,a)};this._removeEventListeners=a.noop,this.start=function(){s.started||(s._removeEventListeners=e(b)),s.started=!0},this.stop=function(){s.started&&(s._removeEventListeners(),s._removeEventListeners=a.noop),s.started=!1},p.autoStart&&this.start()},c=function(a){return/^(http|https):\/\/.*$/.test(a)},d=function(a){return a&&"object"==typeof a},e=function(a){var e=a||{};if(!c(e.baseUrl))throw new Error("Invalid url");return e.autoStart=e.autoStart!==!1,e.additionalUrlParams=d(e.additionalUrlParams)?e.additionalUrlParams:{},{auto:function(){var a=document.getElementsByTagName("video")[0]||null;return new b(a,e)},forElement:function(a){var c=document.getElementById(a)||null;return new b(c,e)}}};return e.Utils=a,e});